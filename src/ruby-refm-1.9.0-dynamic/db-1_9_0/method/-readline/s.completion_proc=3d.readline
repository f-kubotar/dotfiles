visibility=public
kind=defined
names=completion_proc=

--- completion_proc=(proc)
補完時の動作を決定する[[c:Proc]]オブジェクトを指定します。
procは引数に入力文字列を取り、候補文字列の配列を返すようにしてください。

入力文字列は Readline.completer_word_break_characters に含まれる文字で単語ごとに区切られます。
つまり、それらの文字の直後からカーソルの直前までの文字列が proc の引数に渡されます。
    require 'readline'

    WORDS = %w(foo foobar foobaz)

    Readline.completion_proc = proc {|word|
        WORDS.grep(/\A#{Regexp.quote word}/)
    }

    while buf = Readline.readline("> ")
      p buf
    end

